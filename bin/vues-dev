#!/usr/bin/env node

const cli   = require('commander')
const chalk = require('chalk')
const Vues  = require('../')

const defaultHost = 'localhost'
const defaultPort = 3000

cli.option('-h, --host [host]', `Server host ${chalk.blue(`(${defaultHost})`)}`, defaultHost)
   .option('-p, --port [port]', `Server port ${chalk.blue(`(${defaultPort})`)}`, defaultPort)
   .parse(process.argv)

const config = Vues.config({
  cli,
  host: cli.host,
  port: cli.port
})

const { host, port } = config
const server         = Vues.server(config)

server.listen(port, host, err => {
  if (err) {
    console.error('Vues:', err.stack) // eslint-disable-line no-console
    process.exit(1)
  }
})
